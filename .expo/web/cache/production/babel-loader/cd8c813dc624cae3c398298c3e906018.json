{"ast":null,"code":"import _slicedToArray from\"@babel/runtime/helpers/slicedToArray\";import _regeneratorRuntime from\"@babel/runtime/regenerator\";import React,{Component,useState}from\"react\";import StyleSheet from\"react-native-web/dist/exports/StyleSheet\";import View from\"react-native-web/dist/exports/View\";import Text from\"react-native-web/dist/exports/Text\";import Image from\"react-native-web/dist/exports/Image\";import ImageBackground from\"react-native-web/dist/exports/ImageBackground\";import Button from\"react-native-web/dist/exports/Button\";import TextButton from\"./common/TextButton\";import Header from\"./common/Header\";import CustomInput from\"./common/CustomInput.js\";import{useDispatch,useSelector}from'react-redux';import{setUser,userConnected,setCurrentPartyId}from\"../redux/user\";var JoinRoomCode=function JoinRoomCode(_ref){var navigation=_ref.navigation;var response;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),code=_useState2[0],onChangeTextCode=_useState2[1];function loginToRoom(_token,_code){var _response;return _regeneratorRuntime.async(function loginToRoom$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return _regeneratorRuntime.awrap(fetch(\"https://shangrila.pythonanywhere.com/joinParty?token=\"+_token+\"&code=\"+_code).then(function(response){return response.json();}).then(function(json){return{idParty:json.party_id};}).catch(function(error){console.error(error);}));case 3:_response=_context.sent;console.log(\"res ======!!======\",_response);return _context.abrupt(\"return\",_response);case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 11:;case 12:case\"end\":return _context.stop();}}},null,null,[[0,8]],Promise);}var request;var dispatch=useDispatch();var token=useSelector(function(state){return state.user.user.token;});return React.createElement(View,{style:styles.container},React.createElement(View,null,React.createElement(View,{style:styles.Text1},React.createElement(Text,{style:styles.devenezLeader},\"Rejoins la salle de ton pote !\")),React.createElement(View,{style:styles.MainButton1},React.createElement(CustomInput,{useStateFunction:onChangeTextCode,useStateValue:code,placeholder:\"Le Code de la salle (6 caract\\xE8res)\"}))),React.createElement(View,{style:styles.SecondaryButton1},React.createElement(TextButton,{content:\"Se rendre dans la salle\",action:function _callee(){var response;return _regeneratorRuntime.async(function _callee$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(\"text\",code);_context2.next=3;return _regeneratorRuntime.awrap(loginToRoom(token,code));case 3:response=_context2.sent;console.log(\"response === \",response);if(response.idParty!=null){console.log(\"resss body === \",response.idParty);dispatch(setCurrentPartyId(response));navigation.push('Room');}case 6:case\"end\":return _context2.stop();}}},null,null,null,Promise);}})));};var styles=StyleSheet.create({container:{flex:1,backgroundColor:\"#120841\",flexDirection:\"column\",justifyContent:\"space-between\"},image:{justifyContent:'space-around',flexDirection:'row'},imageLogo:{width:325,height:325},Text1:{padding:20},devenezLeader:{fontFamily:\"Roboto_700Bold\",textAlign:'center',color:'white'},devenirLeader:{width:264,height:81,backgroundColor:\"rgba(255,255,255,1)\",borderRadius:20,shadowColor:\"rgba(228,66,0,1)\",shadowOffset:{width:3,height:3},elevation:30,shadowOpacity:1,shadowRadius:10,fontFamily:\"CarterOne_400Regular\",color:\"rgba(18,8,65,1)\",textAlign:\"center\"},imageLogo:{width:325,height:325},Text1:{fontFamily:\"Roboto_300Light\",padding:20},devenezLeader:{fontFamily:\"Roboto_700Bold\",textAlign:'center',color:'white'},SecondaryButton1:{marginBottom:40}});export default JoinRoomCode;","map":{"version":3,"sources":["/home/jeanningros/lug/components/JoinRoomCode.js"],"names":["React","Component","useState","TextButton","Header","CustomInput","useDispatch","useSelector","setUser","userConnected","setCurrentPartyId","JoinRoomCode","navigation","response","code","onChangeTextCode","loginToRoom","_token","_code","fetch","then","json","idParty","party_id","catch","error","console","log","request","dispatch","token","state","user","styles","container","Text1","devenezLeader","MainButton1","SecondaryButton1","push","StyleSheet","create","flex","backgroundColor","flexDirection","justifyContent","image","imageLogo","width","height","padding","fontFamily","textAlign","color","devenirLeader","borderRadius","shadowColor","shadowOffset","elevation","shadowOpacity","shadowRadius","marginBottom"],"mappings":"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","sourcesContent":["import React, { Component, useState } from \"react\";\nimport { StyleSheet, View, Text, Image, ImageBackground, Button } from \"react-native\";\nimport TextButton from \"./common/TextButton\";\nimport Header from \"./common/Header\";\nimport CustomInput from \"./common/CustomInput.js\";\nimport { useDispatch, useSelector } from 'react-redux';\nimport { setUser, userConnected, setCurrentPartyId } from '../redux/user';\n\n\nconst JoinRoomCode = ({ navigation }) => {\n  var response;\n  const [code, onChangeTextCode] = useState('');\n//   const [mdp, onChangeTextMdp] = useState('');\n\n  async function loginToRoom (_token, _code) {\n    try {\n      let response = await fetch(`https://shangrila.pythonanywhere.com/joinParty?token=${_token}&code=${_code}`)\n      .then((response) => response.json())\n      .then((json) => {\n        return ({\n          idParty: json.party_id,\n          })\n      })\n  .catch((error) => { console.error(error) });\n      console.log (\"res ======!!======\",response)\n      return response;\n    } catch (error) {\n      console.error(error);\n    };\n  }\n    \n  var request; \n  \n  const dispatch = useDispatch();\n  const token = useSelector((state) => state.user.user.token);\n\n  return (\n    <View style={styles.container}>\n      <View>\n        <View style={styles.Text1}>\n          <Text style={styles.devenezLeader}>\n            Rejoins la salle de ton pote !\n          </Text>\n        </View>\n        <View style={styles.MainButton1}>\n          <CustomInput useStateFunction={onChangeTextCode} useStateValue={code} placeholder=\"Le Code de la salle (6 caractÃ¨res)\"/>\n        </View>\n      </View>\n\n      <View style={styles.SecondaryButton1}>\n      <TextButton content=\"Se rendre dans la salle\" action={async () => {\n          console.log (\"text\",code);\n          let response = await loginToRoom (token, code);\n          console.log(\"response === \",response);\n          if (response.idParty!= null) {\n            console.log(\"resss body === \", response.idParty);\n            dispatch(setCurrentPartyId(response));\n            //dispatch(userConnected());\n            navigation.push('Room'); \n          }\n        } \n      }/>\n      </View>\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: \"#120841\",\n    flexDirection: \"column\",\n    justifyContent: \"space-between\",\n  },\n  image: {\n    justifyContent: 'space-around',\n    flexDirection: 'row'\n  },\n  imageLogo: {\n    width: 325,\n    height: 325,\n  },\n  Text1: {\n    padding: 20,\n  },\n  devenezLeader: {\n    fontFamily: \"Roboto_700Bold\",\n    textAlign: 'center',\n    color: 'white',\n  },\n  devenirLeader: {\n    width: 264,\n    height: 81,\n    backgroundColor: \"rgba(255,255,255,1)\",\n    borderRadius: 20,\n    shadowColor: \"rgba(228,66,0,1)\",\n    shadowOffset: {\n      width: 3,\n      height: 3\n    },\n    elevation: 30,\n    shadowOpacity: 1,\n    shadowRadius: 10,\n    fontFamily: \"CarterOne_400Regular\",\n    color: \"rgba(18,8,65,1)\",\n    textAlign: \"center\",\n  },\n  imageLogo: {\n    width: 325,\n    height: 325,\n  },\n  Text1: {\n    fontFamily: \"Roboto_300Light\",\n    padding: 20,\n   },\n  devenezLeader: {\n   fontFamily: \"Roboto_700Bold\",\n   textAlign: 'center',\n   color: 'white'\n  },\n  SecondaryButton1: {\n    marginBottom: 40,\n  },\n});\n\nexport default JoinRoomCode;"]},"metadata":{},"sourceType":"module"}